@use 'sass:math';
@use 'sass:map';
@use 'sass:list';
@use 'sass:color';

// Layer 1: HSL Source of Truth
$app-color-hsl: (
    'white': (0, 0%, 100%),
    'black': (0, 0%, 0%),
    'primary': (
      'base': (173, 82%, 46%),  // #15d5b9
    ),
    'success': (
      'base': (212, 100%, 50%),  // #0077ff
    ),
    'warning': (
      'base': (36, 77%, 57%),  // #e6a23c
    ),
    'danger': (
      'base': (0, 87%, 69%),  // #f56c6c
    ),
    'error': (
      'base': (0, 87%, 69%),  // #f56c6c
    ),
    'info': (
      'base': (220, 4%, 58%),  // #909399
    ),
);

// Helper function: Convert HSL tuple to RGB tuple
@function hsl-to-rgb($hsl) {
  $h: list.nth($hsl, 1);
  $s: list.nth($hsl, 2);
  $l: list.nth($hsl, 3);
  
  $color: hsl($h, $s, $l);
  @return (color.red($color), color.green($color), color.blue($color));
}

// Helper function: Convert HSL tuple to hex color
@function hsl-to-hex($hsl) {
  $h: list.nth($hsl, 1);
  $s: list.nth($hsl, 2);
  $l: list.nth($hsl, 3);
  $hsl: hsl($h, $s, $l);
  @return hex($hsl);
}

// Helper function: Get RGB as space-separated string for CSS custom properties
@function rgb-to-string($rgb) {
  @return #{list.nth($rgb, 1)} #{list.nth($rgb, 2)} #{list.nth($rgb, 3)};
}

// Layer 1.5: Convert HSL to RGB for transparency support
$app-color-rgb: (
    'white': hsl-to-rgb(map.get($app-color-hsl, 'white')),
    'black': hsl-to-rgb(map.get($app-color-hsl, 'black')),
    'primary': (
      'base': hsl-to-rgb(map.get($app-color-hsl, 'primary', 'base')),
    ),
    'success': (
      'base': hsl-to-rgb(map.get($app-color-hsl, 'success', 'base')),
    ),
    'warning': (
      'base': hsl-to-rgb(map.get($app-color-hsl, 'warning', 'base')),
    ),
    'danger': (
      'base': hsl-to-rgb(map.get($app-color-hsl, 'danger', 'base')),
    ),
    'error': (
      'base': hsl-to-rgb(map.get($app-color-hsl, 'error', 'base')),
    ),
    'info': (
      'base': hsl-to-rgb(map.get($app-color-hsl, 'info', 'base')),
    ),
);

// Layer 2: Convert HSL to Hex for UI Library compatibility
$app-color: (
    'white': hsl-to-hex(map.get($app-color-hsl, 'white')),
    'black': hsl-to-hex(map.get($app-color-hsl, 'black')),
    'primary': (
      'base': hsl-to-hex(map.get($app-color-hsl, 'primary', 'base')),
    ),
    'success': (
      'base': hsl-to-hex(map.get($app-color-hsl, 'success', 'base')),
    ),
    'warning': (
      'base': hsl-to-hex(map.get($app-color-hsl, 'warning', 'base')),
    ),
    'danger': (
      'base': hsl-to-hex(map.get($app-color-hsl, 'danger', 'base')),
    ),
    'error': (
      'base': hsl-to-hex(map.get($app-color-hsl, 'error', 'base')),
    ),
    'info': (
      'base': hsl-to-hex(map.get($app-color-hsl, 'info', 'base')),
    ),
);

$app-border-color: (
    '': #dcdfe6,
    'light': #e4e7ed,
    'lighter': #ebeef5,
    'extra-light': #f2f6fc,
    'dark': #d4d7de,
    'darker': #cdd0d6,
);

$fill-color: (
    '': #f0f2f5,
    'light': #f5f7fa,
    'lighter': #fafafa,
    'extra-light': #fafcff,
    'dark': #ebedf0,
    'darker': #e6e8eb,
    'blank': #ffffff,
);

$app-fill-color: (
    '': #f0f2f5,
    'light': #f5f7fa,
    'lighter': #fafafa,
    'extra-light': #fafcff,
    'dark': #ebedf0,
    'darker': #e6e8eb,
    'blank': #ffffff,
  );

$app-radius: (
    'base': 0.25rem,
    'small': 0.25rem,
    'middle': 0.5rem,
    'round': 1.25rem,
    'circle': 10e5px,
);

$app-font-size: (
    'extra-large': 2rem,
    'large': 1.25rem,
    'medium': 1.2rem,
    'base': 0.9rem,
    'small': 0.8rem,
    'extra-small': 0.7rem,
);

$white: map.get($app-color, 'white') !default;
$black: map.get($app-color, 'black') !default;
@mixin set-app-mix-light(
    $type,
    $number,
    $mode: 'light',
    $mix-color: $white
) {
    $app-color: map.deep-merge(
        (
            $type: (
                '#{$mode}-#{$number}':
                mix(
                    $mix-color,
                    map.get($app-color, $type, 'base'),
                    math.percentage(math.div($number, 10))
                ),
            ),
        ),
        $app-color
    ) !global;
}
